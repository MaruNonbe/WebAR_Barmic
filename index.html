<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <title>ARキャラクター - Animation</title>

  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>

  <style>
    html, body { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; }
    #ui-container {
      position: fixed; bottom: 30px; left: 0; width: 100%; z-index: 9999;
      display: flex; justify-content: center; gap: 10px; pointer-events: none;
    }
    .btn {
      padding: 12px 20px; background: rgba(255,255,255,0.8); border-radius: 10px;
      font-weight: bold; cursor: pointer; pointer-events: auto; border: none;
    }
  </style>
</head>
<body>

<a-scene
  embedded
  vr-mode-ui="enabled: false"
  arjs="sourceType: webcam; debugUIEnabled: false;"
  renderer="colorManagement: true; exposure: 1.0;"
>
  <a-assets>
    <a-asset-item id="char-model" src="models/character.glb"></a-asset-item>
  </a-assets>

  <a-light type="ambient" intensity="1.0"></a-light>
  <a-light type="directional" position="1 2 1" intensity="0.8"></a-light>

  <a-camera id="camera" rotation-reader></a-camera>

  <a-entity id="character"
            gltf-model="#char-model"
            position="0 0 -5"
            rotation="0 0 0"
            scale="2 2 2"
            animation-mixer="clip: *; loop: repeat; timeScale: 1">
  </a-entity>
</a-scene>

<div id="ui-container">
  <button class="btn" id="btn-bigger">大きく</button>
  <button class="btn" id="btn-smaller">小さく</button>
  <button class="btn" id="btn-rotate">回転</button>
</div>

<script>
  const char = document.querySelector('#character');
  let scale = 2;
  let rotation = 0;

  document.getElementById('btn-bigger').onclick = () => {
    scale += 0.5;
    char.setAttribute('scale', `${scale} ${scale} ${scale}`);
  };

  document.getElementById('btn-smaller').onclick = () => {
    scale = Math.max(0.1, scale - 0.5);
    char.setAttribute('scale', `${scale} ${scale} ${scale}`);
  };

  document.getElementById('btn-rotate').onclick = () => {
    rotation += 45;
    char.setAttribute('rotation', `0 ${rotation} 0`);
  };
</script>
</body>
</html>